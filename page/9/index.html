<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">



  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">







  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "511a53c9"
    });
  daovoice('update');
  </script>

















  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=kaiti:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=6.6.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.6.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="上善若水の技术簿">
<meta property="og:url" content="https://www.wuxinvip.com/page/9/index.html">
<meta property="og:site_name" content="上善若水の技术簿">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="上善若水の技术簿">



  <link rel="alternate" href="/atom.xml" title="上善若水の技术簿" type="application/atom+xml" />




  <link rel="canonical" href="https://www.wuxinvip.com/page/9/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>上善若水の技术簿</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=130694104"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '130694104');
</script>








  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">上善若水の技术簿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">时光荏苒、不浮青春.</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签<span class="badge">51</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类<span class="badge">47</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档<span class="badge">264</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-schedule">

    
    
    
      
    

    
      
    

    <a href="/calendar/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />日程表</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">

    
    
    
      
    

    
      
    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />站点地图</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/30/essay/weichat-h5-pay/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/30/essay/weichat-h5-pay/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">微信H5支付</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-30 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-30T08:00:00+08:00">2018-06-30</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/essay/" itemprop="url" rel="index"><span itemprop="name">essay</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/img/essay/img/weichatPay.jpg" alt="图片">微信支付流程</p>
<p>微信支付流程 大概就是这个样子、也包括支付宝、各大银联差不多一个流程、也就是传递的参数略有不同</p>
<ul>
<li>用户通过客户端下一个订单、</li>
<li>后台根据用户下的商品来生成一个订单、</li>
<li>然后可以有一个订单确认页面 以显示订单是否完整</li>
<li>之后确认订单、把订单信息发送给微信 生成预支付信息【订单需要支付了、我告诉微信一下、我这有个订单要用你的支付了】</li>
<li>之后用微信返回的预支付信息来调起微信支付【微信表示我收到了、我给你个密钥、你用它去找我的管家要钱就行了】</li>
<li>用户输入密码、确认支付【用户拿着密钥找管家、我要买这个、这是我的账户密码】</li>
<li>支付完成、微信告诉客户端的服务器、他买完了、并且成功了、【微信大佬告诉你后台”也就是你老婆”你丈夫在我这买了个这个】</li>
</ul>
<p>{———-}</p>
<p>核心部分是这么个流程</p>
<p>当然 再接入微信支付前 要判断你对这个网站的拥有权<br>需要在你的服务器 上传一个文件作为验证、这个跟站长在百度等各大搜索引擎验证身份一个意思</p>
<p>还要配置 回调地址 以防止数据被篡改、保证安全性、</p>
<p>对于服务之间的通信全程都是https加密类型-混合型加密技术</p>

          
        
      
    </div>

    
      

  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/06/28/essay/atom/" rel="bookmark">atom 快捷键</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2019/01/12/essay/essay-20/" rel="bookmark">遐想--定制应用</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/12/12/essay/essay-18/" rel="bookmark">编程的套路</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/11/10/essay/avro/" rel="bookmark">apache avro 序列化</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/10/24/essay/essay-16/" rel="bookmark">本博客成长笔记</a></div>
      
    </li>
  
  </ul>


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/30/spring/01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/30/spring/01/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">spring 理解</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-30 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-30T08:00:00+08:00">2018-06-30</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/spring/" itemprop="url" rel="index"><span itemprop="name">spring</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h2 id="想到—你对spring理解的面试题"><a href="#想到—你对spring理解的面试题" class="headerlink" title="想到—你对spring理解的面试题"></a>想到—你对spring理解的面试题</h2><p>spring 呢 是由java语言开发得一个框架<br>这个框架得主要作用呢 是方便开发者更便捷得开发程序、它主要封装了java类的反射、以及容器启动后类互相之间调用问题</p>
<p>熟悉 spring得都了解 spring 有两个主要特性 IOC  AOP</p>
<h3 id="简单描述spring呢-也就这两个"><a href="#简单描述spring呢-也就这两个" class="headerlink" title="简单描述spring呢 也就这两个"></a>简单描述spring呢 也就这两个</h3><p>控制反转和依赖注入</p>
<p>面向切面</p>
<p>控制反转 是解决类的统一反射<br> 主要作用是将java原生类 由spring框架反射这个类的信息 在容器初始化后调用<br>依赖注入 是解决各个类之间互相调用问题、类解耦 </p>
<p>面向切面</p>
<p>使用动态代理来代理业务逻辑代码的执行 在执行代理层的时候 可以在方法中织入我们想要执行的方法</p>
<h3 id="那么复杂点想想呢"><a href="#那么复杂点想想呢" class="headerlink" title="那么复杂点想想呢"></a>那么复杂点想想呢</h3><h4 id="复杂点结合容器启动过程、对比所有的你碰到得编程系统、比如linux、win系统启动过程、还有tomcat启动"><a href="#复杂点结合容器启动过程、对比所有的你碰到得编程系统、比如linux、win系统启动过程、还有tomcat启动" class="headerlink" title="复杂点结合容器启动过程、对比所有的你碰到得编程系统、比如linux、win系统启动过程、还有tomcat启动"></a>复杂点结合容器启动过程、对比所有的你碰到得编程系统、比如linux、win系统启动过程、还有tomcat启动</h4><p>linux : 读取配置文件、加载配置文件、加载系统执行文件、请求内存、加载完毕、刷新上下文<br>tomcat : 读取配置文件、加载配置文件、加载应用jar、加载完毕、刷新上下文<br>win : 读取配置文件、加载配置文件、服务注册到注册表、注册表启动必须程序、启动完毕</p>
<p>【像什么启动端口、就不谈了、了解程序启动步骤、想的还是有点浅、待完善】</p>
<p>1、寻找配置文件、加载配置【这跟是系统上的设置一样、读取用户设置你再开机】<br>2、读取到配置文件、接下来启动jdk、这里就不讲、也将不明白<br>3、spring要读取 我们写的java类文件、将其反射到内存中、用来调用<br>4、启动完成检查启动项是否都已将ok、刷新上下文</p>
<p>第二部呢 涉及到jdk以及c之间的启动、<br>    这里可以大概猜想下、<br>        spring启动-本身也是java文件、jdk编译spring文件、那么要编译spring文件按照java中得双亲委派机制要编写父类<br>        当然所有的父类都会刀jdk中、那么也就是说先编译jdk、<br>        jdk启动后、启动spring基类包文件、spring编译完成、读取配置文件、去编译我们得应用jar、我们的应用jar又会有基类包文件、<br>        转向再去编写基类【也就是应用上的依赖包和父类包】<br>        当应用jar编译完成后、进入反射分配内存阶段<br>        统计所有java类信息、需要内存信息、分配内存、把各个类得对象信息放到方法区【1.8里叫 元数据区 也好理解、所有class得计算机内存区、在请求之后是数据运行区就】</p>
<pre><code>上边呢把整个应用得编译、分配内存、大概才想了一下
</code></pre><p>那么程序事怎么运行的呢？</p>
<pre><code>也可以猜想下
    一堆内存数据、访问该到哪里接入？
    为什么就到spring controller里了呢？

    我可以做这样一个设想
    我有一块专门的请求处理区。
    这里呢 我放一个匹配器、所有的请求来了都到这、把url一截断处理 我们能得到不同的字符

    这个字符呢 也就对应着 不用controller=的url
    然后根据这个字符找到不同的方法区对应的方法地址
    就可以往下的内存中链形行走了
</code></pre><p>**  有一个特别有意思的事情</p>
<pre><code>spring容器启动过程中、类循环调用

两个基类包调用了同一个类、在容器启动时候导致类循环调用启动失败

把上边类启动过程搞明白了、一琢磨就想到哪里出问题了、类启动初始化bean的过程中、有bean初始化一半的时候、碰到了另一个类对他同时也进行初始化
【至于为什么会这样、在类的初始化过程中、也是分类好几步、毕竟一个类的初始化不能一步到位、就在这个初始化中】

问题就到了类初始化问题

那么类的初始化、刨除双亲委派机制 父类初始化完毕才能初始化子类
剩下就是 类初始化 要初始化引用注入java类

类循环调用就在这里出现了、a类初始化、需要初始化b、b类初始化需要初始化c、c类初始化需要初始化a、
解决办法：lazy load 
当然这样的引用常出现在糅合配置类上、如果配置清晰、也不会有这样的问题
</code></pre><p><a href="https://www.wuxinvip.com/2018/03/24/spring/spring/">spring bean初始化过程</a></p>

          
        
      
    </div>

    
      

  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/spring/spring-crontab/" rel="bookmark">spring-定时任务</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/spring/spring/" rel="bookmark">spring</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/spring/springmvc/" rel="bookmark">sringmvc</a></div>
      
    </li>
  
  </ul>


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/29/ai/yuyin-001/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/29/ai/yuyin-001/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">语音交互</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-29 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-29T08:00:00+08:00">2018-06-29</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>语音交互发展史</li>
<li><p>语音交互简介</p>
<pre><code>语音合成【在线、离线】
语音识别【听写、转写、唤醒】
语义理解【AIUI】
语音识别模块【麦克风阵列、语音合成芯片、离线识别模块】
模式识别【人脸识别、声纹识别】
语音扩展【语音测评、机器翻译】
</code></pre></li>
</ul>
<p>{———-}</p>
<ul>
<li><p>语音交互应用场景</p>
<pre><code>导航
智能设备
</code></pre></li>
</ul>
<ul>
<li><p>语音交互组件</p>
<pre><code>AI
</code></pre></li>
</ul>

          
        
      
    </div>

    
      


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/29/mysql/mysql-solution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/29/mysql/mysql-solution/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">MySQL经典架构</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-29 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-29T08:00:00+08:00">2018-06-29</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p><strong>mysql主从复制</strong></p>
<p>此种架构，一般初创企业比较常用，也便于后面步步的扩展</p>
<p><img src="/img/mysql/img/mysql-slave-master.jpg" alt="图片"></p>
<p>此架构特点：</p>
<ul>
<li>1、成本低，布署快速、方便</li>
<li>2、读写分离</li>
<li>3、还能通过及时增加从库来减少读库压力</li>
<li>4、主库单点故障</li>
<li>5、数据一致性问题（同步延迟造成）</li>
</ul>
<p>{———-}</p>
<p><strong>MySQL+MMM架构</strong></p>
<p>通过 DRBD 基于 block 块的复制模式，快速进行双主故障切换，很大程度上解决主库单点故障问题</p>
<p><img src="/img/mysql/img/mysql-mmm.jpg" alt="图片"></p>
<p>此架构特点：</p>
<ul>
<li>1、高可用软件可使用 Heartbeat, 全面负责 VIP、数据与 DRBD 服务的管理</li>
<li>2、主故障后可自动快速切换，并且从库仍然能通过 VIP 与新主库进行数据同步</li>
<li>3、从库也支持读写分离，可使用中间件或程序实现</li>
</ul>
<p><strong>MySQL+DRDB架构</strong></p>
<p>MHA 目前在 Mysql 高可用方案中应该也是比较成熟和常见的方案，它由日本人开发出来，在 mysql 故障切换过程中，MHA 能做到快速自动切换操作，而且还能最大限度保持数据的一致性</p>
<p><img src="/img/mysql/img/mysql-drdb.jpg" alt="图片"></p>
<p>此架构特点：</p>
<ul>
<li>1、安装布署简单，不影响现有架构</li>
<li>2、自动监控和故障转移</li>
<li>3、保障数据一致性</li>
<li>4、故障切换方式可使用手动或自动多向选择</li>
<li>5、适应范围大（适用任何存储引擎）</li>
</ul>
<p><strong>MySQL+MHA架构</strong></p>
<p>MMM 即 Master-Master Replication Manager for MySQL（mysql 主主复制管理器），是关于 mysql 主主复制配置的监控、故障转移和管理的一套可伸缩的脚本套件（在任何时候只有一个节点可以被写入），这个套件也能基于标准的主从配置的任意数量的从服务器进行读负载均衡，所以你可以用它来在一组居于复制的服务器启动虚拟 ip，除此之外，它还有实现数据备份、节点之间重新同步功能的脚本。<br>MySQL 本身没有提供 replication failover 的解决方案，通过 MMM 方案能实现服务器的故障转移，从而实现 mysql 的高可用。</p>
<p><img src="/img/mysql/img/mysql-mha.jpg" alt="图片"></p>
<p>此方案特点：</p>
<ul>
<li>1、安全、稳定性较高，可扩展性好</li>
<li>2、 对服务器数量要求至少三台及以上</li>
<li>3、 对双主（主从复制性要求较高）</li>
<li>4、 同样可实现读写分离</li>
</ul>

          
        
      
    </div>

    
      

  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/mysql/mysql-care-point/" rel="bookmark">mysql-care点</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/mysql/mysql-design-1/" rel="bookmark">数据库设计三大范式</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/mysql/mysql-common/" rel="bookmark">mysql-common</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/mysql/mysql-max-connects/" rel="bookmark">mysql最大连接数</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/03/24/mysql/mysql-shell/" rel="bookmark">MySQL常用命令</a></div>
      
    </li>
  
  </ul>


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/28/essay/atom/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/28/essay/atom/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">atom 快捷键</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-28 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-28T08:00:00+08:00">2018-06-28</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/essay/" itemprop="url" rel="index"><span itemprop="name">essay</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th style="text-align:left">英文</th>
<th style="text-align:left">中文</th>
<th style="text-align:left">快捷键</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">New Window</td>
<td style="text-align:left">新建界面窗口</td>
<td style="text-align:left">Ctrl + Shift + N</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">New File</td>
<td style="text-align:left">新建文件</td>
<td style="text-align:left">Ctrl + N</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Open File</td>
<td style="text-align:left">打开文件</td>
<td style="text-align:left">Ctrl + O</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Open Folder</td>
<td style="text-align:left">打开文件夹</td>
<td style="text-align:left">Ctrl + Shift + O</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Add Project Folder</td>
<td style="text-align:left">加载项目目录</td>
<td style="text-align:left">Ctrl + Alt + O</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Reopen Last Item</td>
<td style="text-align:left">重新加载上次项目</td>
<td style="text-align:left">Ctrl + Shift + T</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Save</td>
<td style="text-align:left">保存文件</td>
<td style="text-align:left">Ctrl + S</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Save As</td>
<td style="text-align:left">另存为</td>
<td style="text-align:left">Ctrl + Shift +S</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Close Tab</td>
<td style="text-align:left">关闭当前编辑文档</td>
<td style="text-align:left">Ctrl + W</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Close Window</td>
<td style="text-align:left">关闭编辑器</td>
<td style="text-align:left">Ctrl + Shift + W</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Undo</td>
<td style="text-align:left">撤销</td>
<td style="text-align:left">Ctrl + Z</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Redo</td>
<td style="text-align:left">重做</td>
<td style="text-align:left">Ctrl + Y</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Cut</td>
<td style="text-align:left">剪切</td>
<td style="text-align:left">Shift + Delete</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Copy</td>
<td style="text-align:left">复制</td>
<td style="text-align:left">Ctrl + Insert</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Copy Path</td>
<td style="text-align:left">复制文档路径</td>
<td style="text-align:left">Ctrl + Shift + C</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Paste</td>
<td style="text-align:left">粘贴</td>
<td style="text-align:left">Shift + Insert</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Select All</td>
<td style="text-align:left">全选</td>
<td style="text-align:left">Ctrl + A</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Select Encoding</td>
<td style="text-align:left">选择编码</td>
<td style="text-align:left">Ctrl + Shift +U</td>
<td>就是设置文件的编码</td>
</tr>
<tr>
<td style="text-align:left">Go to Line</td>
<td style="text-align:left">跳转到某行</td>
<td style="text-align:left">Ctrl + G</td>
<td>支持行列搜索,Row:Column</td>
</tr>
<tr>
<td style="text-align:left">Slect Grammar</td>
<td style="text-align:left">语法选择</td>
<td style="text-align:left">Ctrl + Shift + L</td>
<td>和Sublime的Syntax设置功能一样</td>
</tr>
<tr>
<td style="text-align:left">Reload</td>
<td style="text-align:left">重载</td>
<td style="text-align:left">Ctrl+ Alt +R</td>
<td>重新载入当前编辑的文档</td>
</tr>
<tr>
<td style="text-align:left">Toggle Full Screen</td>
<td style="text-align:left">全屏</td>
<td style="text-align:left">F11</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Increase Font Size</td>
<td style="text-align:left">增大字体</td>
<td style="text-align:left">Ctrl + Shift + “+”</td>
<td>Sublime的Ctrl + 也能生效</td>
</tr>
<tr>
<td style="text-align:left">Decrease Font Size</td>
<td style="text-align:left">减小字体</td>
<td style="text-align:left">Ctrl + Shift + “-“</td>
<td>Sublime的Ctrl - 也能生效</td>
</tr>
<tr>
<td style="text-align:left">Toggle Tree View</td>
<td style="text-align:left">展示隐藏目录树</td>
<td style="text-align:left">Ctrl + （竖杠）</td>
<td>Ctrl+b可以隐藏不能展示</td>
</tr>
<tr>
<td style="text-align:left">Toggle Commadn palette</td>
<td style="text-align:left">全局搜索面板</td>
<td style="text-align:left">Ctrl + Shift + P</td>
<td>和Sublime的大同小异</td>
</tr>
<tr>
<td style="text-align:left">Select Line</td>
<td style="text-align:left">选定一行</td>
<td style="text-align:left">Ctrl + L</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Select First Character of Line</td>
<td style="text-align:left">选定光标至行首</td>
<td style="text-align:left">Shift + Home</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Slect End of Line</td>
<td style="text-align:left">选定光标至行尾</td>
<td style="text-align:left">Shift + End</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Select to Top</td>
<td style="text-align:left">选定光标处至文档首行</td>
<td style="text-align:left">Ctrl + Shift + Home</td>
<td>就是光标处作为分割线,取文档上部分</td>
</tr>
<tr>
<td style="text-align:left">Select to Bottom</td>
<td style="text-align:left">选定光标处至文档尾行</td>
<td style="text-align:left">Ctrl + Shfit + End</td>
<td>就是光标处作为分割线,取文档下部分</td>
</tr>
<tr>
<td style="text-align:left">Find in Buffer</td>
<td style="text-align:left">从缓存器搜索</td>
<td style="text-align:left">Ctrl + F</td>
<td>与Sublime一致</td>
</tr>
<tr>
<td style="text-align:left">Replace in Buffer</td>
<td style="text-align:left">高级替换</td>
<td style="text-align:left">Ctrl + Shift + F</td>
<td>与Sublime一致</td>
</tr>
<tr>
<td style="text-align:left">Select Next</td>
<td style="text-align:left">匹配选定下一个</td>
<td style="text-align:left">Ctrl + D</td>
<td>和Sublime一模一样有木有</td>
</tr>
<tr>
<td style="text-align:left">Select All</td>
<td style="text-align:left">匹配选定所有</td>
<td style="text-align:left">Alt + F3</td>
<td>和Sublime一模一样有木有</td>
</tr>
<tr>
<td style="text-align:left">Find File</td>
<td style="text-align:left">查询文件,选定打开</td>
<td style="text-align:left">Ctrl + P</td>
<td>与Sublime不一样</td>
</tr>
<tr>
<td style="text-align:left">Delte End of Word</td>
<td style="text-align:left">删除光标处至词尾</td>
<td style="text-align:left">Ctrl + Del</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Duplicate Line</td>
<td style="text-align:left">复制行</td>
<td style="text-align:left">Ctrl + Shift + D</td>
<td>复制光标所在行自动换行</td>
</tr>
<tr>
<td style="text-align:left">Delete Line</td>
<td style="text-align:left">删除一行</td>
<td style="text-align:left">Ctrl + Shift + K</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Toggle Comment</td>
<td style="text-align:left">启用注释</td>
<td style="text-align:left">Ctrl + /</td>
<td>与Sublime一致</td>
</tr>
<tr>
<td style="text-align:left">Toggle developer tools</td>
<td style="text-align:left">打开Chrome调试器</td>
<td style="text-align:left">Ctrl + Alt + I</td>
<td>挺神奇的</td>
</tr>
<tr>
<td style="text-align:left">Indent</td>
<td style="text-align:left">增加缩进</td>
<td style="text-align:left">Ctrl + [</td>
<td>向右缩进</td>
</tr>
<tr>
<td style="text-align:left">Outdent</td>
<td style="text-align:left">减少缩进</td>
<td style="text-align:left">Ctrl + ]</td>
<td>向左缩进</td>
</tr>
<tr>
<td style="text-align:left">Move Line Up</td>
<td style="text-align:left">行向上移动</td>
<td style="text-align:left">Ctrl + up</td>
<td>如字面意思</td>
</tr>
<tr>
<td style="text-align:left">Move Line Down</td>
<td style="text-align:left">行向下移动</td>
<td style="text-align:left">Ctrl + Down</td>
<td>如字面意思</td>
</tr>
<tr>
<td style="text-align:left">Join Lines</td>
<td style="text-align:left">行链接</td>
<td style="text-align:left">Ctrl + J</td>
<td>追加</td>
</tr>
<tr>
<td style="text-align:left">newline-below</td>
<td style="text-align:left">光标之下增加一行</td>
<td style="text-align:left">Ctrl + Enter</td>
<td>与sublime 一致</td>
</tr>
<tr>
<td style="text-align:left">editor:newline-above</td>
<td style="text-align:left">光标之上增加一行</td>
<td style="text-align:left">Ctrl + Shift + Enter</td>
<td>与sublime 一致</td>
</tr>
<tr>
<td style="text-align:left">pane:show-next-item</td>
<td style="text-align:left">切换编辑的标签页</td>
<td style="text-align:left">Ctrl + Tab</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Fuzzy Finder</td>
<td style="text-align:left">文件跳转面板</td>
<td style="text-align:left">Ctrl + T</td>
<td>如字面意思</td>
</tr>
<tr>
<td style="text-align:left">Select Line Move above</td>
<td style="text-align:left">选中行上移</td>
<td style="text-align:left">Ctrl + up</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Select Line Move below</td>
<td style="text-align:left">选中行下移</td>
<td style="text-align:left">Ctrl + down</td>
<td>如中文意思</td>
</tr>
<tr>
<td style="text-align:left">Symbol-view</td>
<td style="text-align:left">进入变量、函数跳转面板。</td>
<td style="text-align:left">Ctrl + R</td>
<td>如中文意思</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    
      

  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/06/30/essay/weichat-h5-pay/" rel="bookmark">微信H5支付</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2019/01/12/essay/essay-20/" rel="bookmark">遐想--定制应用</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/12/12/essay/essay-18/" rel="bookmark">编程的套路</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/11/10/essay/avro/" rel="bookmark">apache avro 序列化</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2018/10/24/essay/essay-16/" rel="bookmark">本博客成长笔记</a></div>
      
    </li>
  
  </ul>


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/23/block-chain/block-chain-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/23/block-chain/block-chain-1/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">智能合约 简介</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-23 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-23T08:00:00+08:00">2018-06-23</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/block-chain/" itemprop="url" rel="index"><span itemprop="name">block-chain</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>智能合约发展史</p>
<pre><code>区块链发展
</code></pre></li>
</ul>
<ul>
<li><p>智能合约简介</p>
<pre><code>智能合约是“执行合约条款的计算机交易协议”。
[3] 区块链上的所有用户都可以看到基于区块链的智能合约。但是，这会导致包括安全漏洞在内的所有漏洞都可见，并且可能无法迅速修复。
[4]这样的攻击难以迅速解决，例如，2016年6月The DAOEther的漏洞造成损失5000万美元，而开发者试图达成共识的解决方案。
[5] DAO的程序在黑客删除资金之前有一段时间的延迟。以太坊软件的一个硬分叉在时限到期之前完成了攻击者的资金回收工作。
[6]以太坊智能合约中的问题包括合约编程Solidity、编译器错误、以太坊虚拟机错误、对区块链网络的攻击、程序错误的不变性以及其他尚无文档记录的攻击。[7]
</code></pre></li>
</ul>
<p>{———-}</p>
<ul>
<li><p>智能合约应用场景</p>
<pre><code>智慧链：通证token经济设计、
以太坊智能合约
区块链技术
智能合约审计
</code></pre></li>
<li><p>智能合约组件</p>
<pre><code>连接物联网必要组成部分
</code></pre></li>
<li><p>智能合约集群</p>
<pre><code>区块链技术
</code></pre></li>
</ul>

          
        
      
    </div>

    
      


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/20/big-data/spark/spark-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/20/big-data/spark/spark-1/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">spark 简介</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-20 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-20T08:00:00+08:00">2018-06-20</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/big-data/" itemprop="url" rel="index"><span itemprop="name">big-data</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>spark发展史</li>
</ul>
<pre><code>Apache Spark
Spark Logo
开发者    Apache软件基金会, 加州大学柏克莱分校AMPLab, Databricks
稳定版本
2.1.0 （2016年12月28日 ）
开发状态    活跃
编程语言    Scala, Java, Python
操作系统    Linux, Mac OS, Microsoft Windows
类型    数据分析, 机器学习算法
许可协议    Apache许可协议 2.0
网站    spark.apache.org
源代码库    github.com/apache/spark
Apache Spark是一个开源集群运算框架，最初是由加州大学柏克莱分校AMPLab所开发。
相对于Hadoop的MapReduce会在运行完工作后将中介数据存放到磁盘中，Spark使用了存储器内运算技术，能在数据尚未写入硬盘时即在存储器内分析运算。
Spark在存储器内运行程序的运算速度能做到比Hadoop MapReduce的运算速度快上100倍，即便是运行程序于硬盘时，Spark也能快上10倍速度。
[1]Spark允许用户将数据加载至集群存储器，并多次对其进行查询，非常适合用于机器学习算法。
</code></pre><p>{———-}</p>
<ul>
<li>spark简介</li>
<li>spark应用场景</li>
</ul>
<pre><code>使用Spark需要搭配集群管理员和分布式存储系统。
Spark支持独立模式（本地Spark集群）、Hadoop YARN或Apache Mesos的集群管理。
[3] 在分布式存储方面，Spark可以和HDFS[4]、 Cassandra[5] 、OpenStack Swift和Amazon S3等接口搭载。
Spark也支持伪分布式（pseudo-distributed）本地模式，不过通常只用于开发或测试时以本机文件系统取代分布式存储系统。
在这样的情况下，Spark仅在一台机器上使用每个CPU核心运行程序。
</code></pre><ul>
<li>spark组件</li>
</ul>
<pre><code>Spark核心是整个项目的基础，提供了分布式任务调度，调度和基本的I／O功能。而其基础的程序抽象则称为弹性分布式数据集（RDDs），是一个可以并行操作、有容错机制的数据集合。
RDDs可以通过引用外部存储系统的数据集创建（例如：共享文件系统、HDFS、HBase或其他 Hadoop 数据格式的数据源）。
或者是通过在现有RDDs的转换而创建（比如：map、filter、reduce、join等等）。

RDD抽象化是经由一个以Scala, Java, Python的语言集成API所呈现，简化了编程复杂性，应用程序操纵RDDs的方法类似于操纵本地端的数据集合。
</code></pre><ul>
<li>spark集群</li>
</ul>

          
        
      
    </div>

    
      


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.wuxinvip.com/2018/06/20/big-data/hadoop/hadoop-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="上善若水">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="上善若水の技术簿">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/20/big-data/hadoop/hadoop-1/" class="post-title-link" itemprop="https://www.wuxinvip.com/page/9/index.html">hadoop 简介</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-20 08:00:00" itemprop="dateCreated datePublished" datetime="2018-06-20T08:00:00+08:00">2018-06-20</time>
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/big-data/" itemprop="url" rel="index"><span itemprop="name">big-data</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>hadoop发展史</li>
</ul>
<pre><code>Hadoop Apache Lucene创始人Doug Cutting 创建
基于 Nutch开发 本身也是lucence一部分

2004年 Doug Cutting 和Mike Cafarella 实现 HDFS和MapReduce初版

2005年 Nutch移植到新框架 Hadoop再20个节点稳定运行

2006年1月 Doug Cutting 加入雅虎
2006年2月 Apache Hadoop项目正式启动、支持MapReduce和HDFS独立发展
2006年4月 再188节点上（每节点10GB数据）运行排序测试集群需要47.9小时
2006年5月 雅虎建立一个300个节点的Hadoop研究集群
2006年5月 在500个节点运行排序测试集需要42个小时（硬件配置比四月份更优秀）
2006年11月 研究集群增加到600个节点
2006年12月 排序测试集在20个节点上运行1.8个小时、100个节点运行3.3个小时、500个节点运行5.2小时、900个节点需要7.8个小时。

2007年1月 研究集群增加到900个节点
2007年4月 研究集群增加到两个集群1000个节点

2008年4月 在900个节点上运行1TB排序测试集仅需要209秒
2008年10月 研究集群每天装载10TB数据

2009年3月 17个集群共24000个节点
2009年4月 在每分钟排序中胜出、59秒排序500GB（在1400个节点）、173分钟排序100TB数据（在3400节点）
</code></pre><p>{———-}</p>
<ul>
<li>hadoop简介</li>
</ul>
<pre><code>大数据处理、应对数据处理出现的新的技术、
底层也就是大名鼎鼎的HDFS文件系统 对数据并发处理有极强的性能
</code></pre><p><strong><a href="https://en.wikipedia.org/wiki/Apache_Hadoop" target="_blank" rel="noopener">hadoop-wiki</a></strong></p>
<ul>
<li><p>hadoop应用场景</p>
<p>随着数据量的增大、数据量已经到了PB级别、数据的存储也需要更加强大的技术来支持、</p>
</li>
</ul>
<ul>
<li>hadoop组件</li>
</ul>
<pre><code>namenode节点负责存储目录
datanode节点负责存储数据


Map函数
接受一个键值对（key-value pair），产生一组中间键值对。
MapReduce框架会将map函数产生的中间键值对里键相同的值传递给一个reduce函数。
Reduce函数
接受一个键，以及相关的一组值，将这组值进行合并产生一组规模更小的值（通常只有一个或零个值）。
</code></pre><ul>
<li>hadoop集群</li>
</ul>
<pre><code>namenode节点的可靠性
datanode节点的可靠性

让我想到了rocketmq 
nameserver负责存储消息路由订阅消息id 相当于菜单、
broker负责存储消息 相当于菜单下的数据


然后namenode节点的数据统一性？ paxos算法？


当然其中会有很多消息的同步刷新异步刷新、消息节点重建、
怎么保证消息的完整性、怎么保证消息不丢失、怎么排序数据可执行性

很多东西、都是一样的、实现方式都是一个东西、也就是实现的代码可能会不同而已
</code></pre><ul>
<li><p>hadoop 开发思想</p>
<p>分而治之、大任务拆分小任务执行</p>
<p>数据：分片存储、并发调度、结果综合查询</p>
<p>Job&amp;task、Job&amp;Tracker、Task&amp;Tracker</p>
</li>
</ul>
<pre><code>Job&amp;task
   任务执行

Job&amp;Tracker
   作业调度
   分配任务、监控任务执行调度
   监控taskTracker状态

Task&amp;Tracker
   执行任务
   汇报任务

容错机制
   重复执行
   推测执行
</code></pre>
          
        
      
    </div>

    
      


    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  

   <div class="pagination">
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 首页间隔 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8547276212175642"
     data-ad-slot="9207557139"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

   </div>



  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="上善若水" />
            
              <p class="site-author-name" itemprop="name">上善若水</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">264</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">47</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">51</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/wuxinvip" title="GitHub &rarr; https://github.com/wuxinvip" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://gitee.com/none_heart" title="Gitee &rarr; https://gitee.com/none_heart" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://blog.csdn.net/huoyan403" title="CSDN &rarr; https://blog.csdn.net/huoyan403" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="mailto:wuxinvipcom@gmail.com" title="E-Mail &rarr; mailto:wuxinvipcom@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
                </span>
              
            </div>
          

          

          
           
              <div class="links-of-blogroll motion-element links-of-blogroll-block">
                <div class="links-of-blogroll-title">
                   安卓app下载
                </div>
               <img src="/images/download/android-download.png" />
               <!--增加以前旧版本连接博文-->
               <a href="https://www.wuxinvip.com/2018/12/04/version/version-1/" >Previous Releases</a>
              </div>
           

          
          

          
          

          
            
          
          

        </div>

      </section>


      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">上善若水</span>

  

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1273992689&web_id=1273992689" language="JavaScript"></script>
  </div>



        
      </div>
    </footer>

    

    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.6.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.6.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  



  

  

 
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>



  <script>
    
    
      flOptions = {};
      
          flOptions.iconStyle = "box";
      
          flOptions.boxForm = "horizontal";
      
          flOptions.position = "middleRight";
      
          flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-float', flOptions);
    
  </script>


  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


  

</body>
</html>
